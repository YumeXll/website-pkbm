<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Kalender Pendidikan - PKBM Bale Rumawat</title>
    <meta name="description" content="Kalender pendidikan PKBM Bale Rumawat - jadwal dan kegiatan penting." />
    <link rel="stylesheet" href="../css/style.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <style>
      /* Page-specific calendar styles */
      .page-hero { padding: 28px 0; text-align: center; }
      .calendar-wrap { padding: 36px 0; }
      .calendar-card { background: var(--card-bg, #fff); border: 1px solid var(--border-color); border-radius: 12px; padding: 18px; box-shadow: 0 6px 18px rgba(0,0,0,0.04); }
      .calendar-controls { display:flex; gap:8px; align-items:center; justify-content:space-between; margin-bottom:12px; }
      .calendar-controls .left { display:flex; gap:8px; align-items:center; }
      .btn-ghost { background:transparent; border:1px solid var(--border-color); padding:6px 10px; border-radius:8px; cursor:pointer; }
      .month-title { font-weight:600; font-size:1.1rem; }
      .calendar { display:grid; grid-template-columns: repeat(7, 1fr); gap:6px; }
      .calendar .dow { text-align:center; font-weight:600; padding:6px 0; color:var(--dark-color); }
      .cell { min-height:76px; background:transparent; padding:6px; border-radius:8px; position:relative; }
      .cell { cursor: pointer; transition: background 180ms ease, transform 160ms ease, box-shadow 180ms ease; }
      .cell.inactive { color: #9ca3af; }
      .cell .date-num { position:absolute; top:8px; right:8px; font-size:0.9rem; }
      /* circular, more visible date badge */
      .cell .date-num {
        display:inline-flex;
        align-items:center;
        justify-content:center;
        min-width:30px;
        height:30px;
        line-height:1;
        background: var(--card-bg, #fff);
        border: 2px solid var(--border-color);
        padding: 0 6px;
        border-radius: 50%;
        color: var(--text-color, #111);
        box-shadow: 0 2px 6px rgba(0,0,0,0.06);
        transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease;
      }
      /* Today's highlighted circle */
      .cell.today .date-num {
        border-color: var(--primary-color, #22c55e);
        color: var(--primary-color, #22c55e);
        background: rgba(34,197,94,0.08);
        box-shadow: 0 6px 18px rgba(34,197,94,0.08);
      }
      /* subtle pulse when Hari Ini is pressed - separate animations for desktop and mobile
         so we don't lose the translateX centering on mobile (animation replaces transform) */
      .cell.today .date-num.pulse {
        animation: kp-pulse-desktop 900ms ease-out 1;
      }
      @keyframes kp-pulse-desktop {
        0% { transform: scale(1); }
        50% { transform: scale(1.18); }
        100% { transform: scale(1.06); }
      }
      @keyframes kp-pulse-mobile {
        0% { transform: translateX(-50%) scale(1); }
        50% { transform: translateX(-50%) scale(1.18); }
        100% { transform: translateX(-50%) scale(1.06); }
      }
      .event-dot { display:block; width:8px; height:8px; border-radius:50%; background:var(--primary-color); margin-top:28px; margin-left:6px; }
      .events-list { margin-top:14px; }
      .event-item { padding:8px; border-radius:8px; background:rgba(34,197,94,0.06); margin-bottom:8px; }
      @media (max-width:720px) {
        /* increase spacing and touch targets on small screens */
        .calendar { gap:12px; }
        .cell { min-height:110px; padding:10px; }
        /* center badge on narrow screens and make it larger */
        .cell .date-num {
          left:50%; right:auto; transform:translateX(-50%); top:12px;
          min-width:42px; height:42px; font-size:1.05rem; border-width:2px;
        }
        /* ensure events/dot stack below the badge */
        .event-dot { margin-top:56px; }
        /* muted style for days outside the current month */
        .cell.inactive { opacity:0.48; }
        .cell.inactive .date-num {
          border-color: #e6e6e6; color: #9ca3af; background: transparent;
          box-shadow: none;
        }
        /* ensure pulse uses mobile-friendly keyframes so translateX is preserved */
        .cell .date-num.pulse { animation-name: kp-pulse-mobile; }
      }
      /* larger, more legible badges on wider screens */
      @media (min-width:1024px) {
        .cell .date-num {
          min-width:42px;
          height:42px;
          font-size:1.05rem;
          border-width:3px;
          box-shadow: 0 2px 6px rgba(0,0,0,0.06);
          z-index:3;
        }
        .cell { min-height:96px; }
      }
      /* desktop: mute previous/next month dates for clarity */
      @media (min-width:720px) {
        .cell.inactive { opacity:0.56; }
        .cell.inactive .date-num { border-color:#e6e6e6; color:#9ca3af; background:transparent; box-shadow:none; }
      }
      /* general stacking and visual polish for badges */
      .cell .date-num { z-index:3; background-clip: padding-box; }
      .cell.today .date-num { z-index:4; border-color: var(--primary-color, #22c55e); color:#fff; background: var(--primary-color, #22c55e); box-shadow: 0 8px 22px rgba(34,197,94,0.12); }
      /* Selected state when a user clicks a date */
      .cell.selected {
        background: rgba(34,197,94,0.04);
        box-shadow: 0 8px 20px rgba(16,185,129,0.06);
        transform: translateY(-4px);
      }

      .cell.selected .date-num {
        background: var(--primary-color, #22c55e);
        color: #fff;
        border-color: var(--primary-color, #22c55e);
        box-shadow: 0 10px 28px rgba(34,197,94,0.12);
      }

      /* subtle pop when a cell is selected */
      @keyframes kp-select-pop {
        0% { transform: scale(.96); }
        60% { transform: scale(1.08); }
        100% { transform: scale(1); }
      }

      .cell.selected .date-num.pop {
        animation: kp-select-pop 420ms cubic-bezier(.2,.9,.2,1) both;
      }
    </style>
  </head>
  <body>
    <!-- Top Bar -->
    <div class="top-bar">
      <div class="container">
        <div class="top-bar-content">
          <div class="location">
            <i class="fas fa-map-marker-alt"></i>
            <span>Lokasi: Jl. Salabaya Kp. Krajan RT 07 RW 03 Desa Sawahkulon Kecamatan Pasawahan Kabupaten Purwakarta, Jawa Barat 41172</span>
          </div>
          <div class="contact-info">
            <i class="fab fa-whatsapp"></i>
            <span>WA: 0852-1920-9949</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Social Media Bar -->
    <div class="social-bar">
      <div class="container">
        <div class="social-links">
          <a href="WHOUSEFACEBOOKINTHISERA??" target="_blank" rel="noopener noreferrer" aria-label="Facebook">
            <i class="fab fa-facebook-f"></i>
          </a>
          <a href="YES" target="_blank" rel="noopener noreferrer" aria-label="Instagram">
            <i class="fab fa-instagram"></i>
          </a>
          <a href="ILOVEPRIESTESS" target="_blank" rel="noopener noreferrer" aria-label="Youtube">
            <i class="fab fa-youtube"></i>
          </a>
          <a href="mailto:Pancadarmawijayaarum23@gmail.com" aria-label="Email">
            <i class="fas fa-envelope"></i>
          </a>
          <a href="Priestess" target="_blank" rel="noopener noreferrer" aria-label="TikTok">
            <i class="fab fa-tiktok"></i>
          </a>
        </div>
      </div>
    </div>

    <!-- Header / Navigation -->
    <header class="header">
      <div class="container">
        <div class="header-content">
          <div class="logo">
            <a href="../index.html" aria-label="Beranda" title="Beranda">
              <img src="../images/partners/logo.jpg" alt="PKBM Bale Rumawat - Purwakarta" loading="lazy" decoding="async" height="60">
            </a>
          </div>
          <nav class="main-nav" id="mainNav">
            <ul>
              <li class="has-dropdown">
                <a href="#">PROFIL</a>
                <ul class="dropdown">
                  <li><a href="sejarah.html">Sejarah</a></li>
                  <li><a href="visi-misi.html">Visi dan Misi</a></li>
                  <li><a href="kurikulum.html">Kurikulum</a></li>
                  <li><a href="program-pendidikan.html">Program Pendidikan</a></li>
                </ul>
              </li>
              <li class="has-dropdown">
                <a href="#">MEDIA</a>
                <ul class="dropdown">
                  <li><a href="blog.html">Blog</a></li>
                  <li><a href="kalender.html">Kalender Pendidikan</a></li>
                  <li><a href="gallery.html">Gallery Photo</a></li>
                </ul>
              </li>
              <!-- Pelatihan Kerja
              <li><a href="pelatihan-kerja.html">PELATIHAN KERJA</a></li> -->
              <li class="has-dropdown">
                <a href="#">PERANGKAT BELAJAR</a>
                <ul class="dropdown">
                  <li><a href="https://emodul.kemdikbud.go.id/" target="_blank">E-Modul</a></li>
                  <li><a href="https://emodul.kemdikbud.go.id/" target="_blank">E-LEARNING</a></li>
                  <li class="has-dropdown">
                  </li>
                </ul>
              </li>
              <!-- Pendaftaran
              <li class="has-dropdown">
                <a href="#">PENDAFTARAN</a>
                <ul class="dropdown">
                  <li><a href="https://ppdb.mitrainsancendekia.sch.id/" target="_blank">Daftar Online</a></li>
                  <li><a href="panduan-daftar.html">Panduan Daftar Online</a></li>
                  <li><a href="kemitraan.html">Kemitraan</a></li>
                </ul>
              </li>
            -->
              <!-- LOGIN
              <li class="has-dropdown">
                <a href="#">LOGIN</a>
                <ul class="dropdown">
                  <li><a href="https://cbt.mitrainsancendekia.sch.id/login.php" target="_blank">Login CBT</a></li>
                  <li><a href="https://lms.mitrainsancendekia.sch.id/dashboard/" target="_blank">Login e-Learning</a></li>
                  <li><a href="https://cbt.mitrainsancendekia.sch.id/panel/login.php" target="_blank">Login CBT Tutor</a></li>
                  <li><a href="https://lms.mitrainsancendekia.sch.id/dashboard/" target="_blank">Login e-Learning Tutor</a></li>
                </ul>
              </li>
              -->
            </ul>
          </nav>

          <div class="header-actions">
            <!-- theme-toggle disabled temporarily
            <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme" aria-pressed="false" title="Toggle dark mode">
              <i class="fas fa-moon" aria-hidden="true"></i>
            </button>
            -->
            <button class="search-toggle" id="searchToggle" aria-label="Open search" title="Search">
              <i class="fas fa-search"></i>
            </button>
            <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="Toggle Menu">
              <i class="fas fa-bars"></i>
            </button>
          </div>
        </div>
      </div>
      <div class="search-form" id="searchForm">
        <div class="container">
          <form action="#" method="get">
            <input type="search" name="s" placeholder="Type then hit enter to search" aria-label="Search" />
            <button type="button" class="search-close" id="searchClose">
              <i class="fas fa-times"></i>
            </button>
          </form>
        </div>
      </div>
    </header>

    <main id="main-content">
      <section class="page-hero">
        <div class="container">
          <h1 class="section-title">Kalender Pendidikan</h1>
          <p>Jadwal kegiatan, pendaftaran, dan acara penting PKBM Bale Rumawat.</p>
        </div>
      </section>

      <section class="calendar-wrap">
        <div class="container">
          <div class="calendar-card">
            <div class="calendar-controls">
              <div class="left">
                <button id="prevBtn" class="btn-ghost"><i class="fas fa-chevron-left"></i></button>
                <button id="nextBtn" class="btn-ghost"><i class="fas fa-chevron-right"></i></button>
                <button id="todayBtn" class="btn-ghost">Hari Ini</button>
              </div>
              <div class="month-title" id="monthTitle">Month</div>
              <div></div>
            </div>

            <div class="calendar" id="calendar">
              <div class="dow">Min</div><div class="dow">Sen</div><div class="dow">Sel</div><div class="dow">Rab</div><div class="dow">Kam</div><div class="dow">Jum</div><div class="dow">Sab</div>
              <!-- date cells inserted by JS -->
            </div>

            <div class="events-list" id="eventsList">
              <!-- events details shown here when a day is selected -->
            </div>
          </div>
        </div>
      </section>
    </main>

    <script>
      (function(){
        const events = {
          // sample events (YYYY-MM-DD)
          '2025-01-10': [{title:'Pendaftaran Gelombang 1', time:'09:00'}],
          '2025-01-15': [{title:'Ujian Akhir Semester', time:'08:00'}],
          '2025-02-05': [{title:'Workshop Kewirausahaan', time:'13:00'}]
        };

        const monthTitle = document.getElementById('monthTitle');
        const calendar = document.getElementById('calendar');
        const eventsList = document.getElementById('eventsList');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const todayBtn = document.getElementById('todayBtn');

        let view = new Date();
        const pad = n => n.toString().padStart(2,'0');

        function render(){
          // clear previous date cells (keep first 7 dow headers)
          calendar.querySelectorAll('.cell').forEach(n=>n.remove());
          const year = view.getFullYear();
          const month = view.getMonth();
          const firstDay = new Date(year, month, 1).getDay();
          const daysInMonth = new Date(year, month+1, 0).getDate();

          monthTitle.textContent = view.toLocaleString('id-ID', { month: 'long', year: 'numeric' });

          // compute leading blank days (JS: Sunday=0 -> our Min)
          let startIndex = firstDay; // 0..6
          // fill prev month's tail
          const prevDays = new Date(year, month, 0).getDate();
          for(let i=0;i<startIndex;i++){
            const d = prevDays - startIndex + 1 + i;
            const cell = makeCell(year, month-1, d, true);
            calendar.appendChild(cell);
          }

          // current month days
          for(let d=1; d<=daysInMonth; d++){
            const cell = makeCell(year, month, d, false);
            calendar.appendChild(cell);
          }

          // trailing days to complete 42 cells total (6 weeks)
          const totalCells = calendar.querySelectorAll('.cell').length;
          const needed = 42 - totalCells;
          for(let i=1;i<=needed;i++){
            const cell = makeCell(year, month+1, i, true);
            calendar.appendChild(cell);
          }

          // highlight today's cell only when the calendar is showing the current month
          const today = new Date();
          const todayKey = iso(today.getFullYear(), today.getMonth(), today.getDate());
          // remove previous highlights
          calendar.querySelectorAll('.cell.today').forEach(n=>n.classList.remove('today'));
          const todayCell = calendar.querySelector('.cell[data-date="'+todayKey+'"]');
          if(todayCell){
            todayCell.classList.add('today');
          }
        }

        function iso(y,m,d){
          const mm = (m+1).toString().padStart(2,'0');
          return `${y}-${mm}-${pad(d)}`;
        }

        function makeCell(y,m,d,inactive){
          const el = document.createElement('div');
          el.className = 'cell' + (inactive? ' inactive':'');
          const iy = new Date(y,m,d);
          const key = iso(iy.getFullYear(), iy.getMonth(), iy.getDate());
          el.dataset.date = key;
          el.innerHTML = `<div class="date-num">${d}</div>`;
          if(events[key] && events[key].length){
              const dot = document.createElement('span'); dot.className='event-dot'; el.appendChild(dot);
              el.addEventListener('click', ()=> { selectDate(key); showEvents(key, iy); });
          } else {
              el.addEventListener('click', ()=> { selectDate(key); showEvents(key, iy); });
          }
          return el;
        }

          // mark the clicked date as selected (single selection)
          function selectDate(key){
            // remove previous selection
            calendar.querySelectorAll('.cell.selected').forEach(n=>n.classList.remove('selected'));

            // determine today's key so we can toggle the today highlight
            const now = new Date();
            const todayKey = iso(now.getFullYear(), now.getMonth(), now.getDate());

            // if selecting a different date than today, remove the visual 'today' highlight
            if(key !== todayKey){
              calendar.querySelectorAll('.cell.today').forEach(n=>n.classList.remove('today'));
            }

            const cell = calendar.querySelector('.cell[data-date="'+key+'"]');
            if(cell){
              cell.classList.add('selected');

              // if the selected date is today, ensure the today class remains present
              if(key === todayKey){
                cell.classList.add('today');
              }

              // animate badge pop
              const badge = cell.querySelector('.date-num');
              if(badge){
                badge.classList.remove('pop');
                // force reflow
                void badge.offsetWidth;
                badge.classList.add('pop');
                // remove pop after animation so it can retrigger
                setTimeout(()=> badge.classList.remove('pop'), 700);
              }
            }
          }

        function showEvents(key, date){
          eventsList.innerHTML = '';
          const h = document.createElement('h3');
          h.textContent = 'Kegiatan pada ' + date.toLocaleDateString('id-ID');
          eventsList.appendChild(h);
          if(events[key] && events[key].length){
            events[key].forEach(ev=>{
              const div = document.createElement('div'); div.className='event-item';
              div.innerHTML = `<strong>${ev.title}</strong><div>${ev.time || ''}</div>`;
              eventsList.appendChild(div);
            });
          } else {
            const p = document.createElement('div'); p.className='event-item'; p.textContent='Tidak ada kegiatan.'; eventsList.appendChild(p);
          }
        }

        prevBtn.addEventListener('click', ()=>{ view.setMonth(view.getMonth()-1); render(); });
        nextBtn.addEventListener('click', ()=>{ view.setMonth(view.getMonth()+1); render(); });
        todayBtn.addEventListener('click', ()=>{
          view = new Date();
          render();
          // show today's events and add a pulse to the badge
          const t = new Date();
          const key = iso(t.getFullYear(), t.getMonth(), t.getDate());
          const cell = calendar.querySelector('.cell[data-date="'+key+'"]');
          if(cell){
            // briefly add a pulse class to the date-num
            const badge = cell.querySelector('.date-num');
            if(badge){ badge.classList.add('pulse'); setTimeout(()=>badge.classList.remove('pulse'), 1000); }
            showEvents(key, t);
          }
        });

        render();
      })();
    </script>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-col">
                    <h3>Alamat</h3>
                    <p>Jl. Salabaya Kp. Krajan RT 07 RW 03<br>
                    Desa Sawahkulon, Kecamatan Pasawahan<br>
                    Kabupaten Purwakarta, Jawa Barat 41172</p>
                </div>
                <div class="footer-col">
                    <h3>Email</h3>
                    <p><a href="mailto:Pancadarmawijayaarum23@gmail.com">Pancadarmawijayaarum23@gmail.com</a></p>
                </div>
                <div class="footer-col">
                    <h3>Nomor Telepon</h3>
                    <p>+62 852 1920 9949<br>
                </div>
                <div class="footer-col">
                    <h3>Jam Operasional</h3>
                    <p>Senin s/d Jum'at - 13:00 hingga 18:00<br>
                    Akhir Pekan - 08:00 hingga 12:00</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 - PKBM Bale Rumawat</p>
            </div>
        </div>
    </footer>

    <script src="../js/main.js"></script>
  </body>
</html>
